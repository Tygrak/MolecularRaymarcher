## Options

This page explains the available options in the web application. On the left side of the application is a sidebar which contains all the available options. 

#### Render Only On Movement checkbox

With this checkbox enabled, the viewport is not continuously redrawn. Instead the scene is rendered only when the camera is moved.

#### Always Full Render checkbox

With this checkbox disabled, some optimizations are additionally used when rendering while the camera is moved, to make the experience a bit smoother at the cost of a reduced render quality.

#### Structure selection

This select input allows changing between the two included predefined molecules `1cqw` and `1aon`. If a structure was loaded from a file, this option also allows reloading the previously loaded structure.

Below this select input is a file input which allows loading molecular data from arbitrary .pdb files. The file needs to first be selected, and afterward the load file button must be pressed. Additionally, the application supports loading from plaintext .pcd (pointcloud) files, and loading the vertex positions from .obj files (this creates an atom at the position of every vertex in the .obj file).

#### Visualization Mode selection

The application can be switched to use a very simple sticks-and-balls model using either impostor spheres or simplified 3D spheres. 

#### Rendering Mode selection

Allows switching to different rendering modes. The rendering modes are documented here: [Rendering Modes](RenderingModes.md). 

#### Atom Size Scale slider

Can be used to increase or decrease the scale of the atoms.

#### Smoothmin k slider

Can be used to increase or decrease the value of the smooth minimum k parameter. This controls how far away atoms get unified/smoothed with the smooth minimum operators in the SDF.

#### Light Rotation slider

Controls the position of the directional light for the various lit rendering modes.

#### Run Benchmark button

Starts a benchmark for the currently selected structure. The structure is rendered from 14 different positions for 100 frames each. The results are outputted into the developer console.

#### Regenerate Octree button

Recreates the octree data structure. Recreating the octree is highly recommended after changing any of the parameters of the octree: the atom size scale, smoothmin k or desired number of layers.

#### Average Frame Time

This shows the average time in milliseconds rendering a single frame took. The flag `--disable-dawn-features=disallow_unsafe_apis` needs to be enabled when starting Chrome Canary to enable this feature.

### Additional Options

These options are available after opening the Additional Options dropdown.

#### Smooth Min Type selection

Allows selecting between 4 different types of smooth minimum. The non-polynomial smooth min types aren't guaranteed to be well supported and might require larger octree cells than generated by default. This can be done by putting smooth min k and atom scale to max, regenerating the octree and afterward returning the values to the desired ones.

#### Highlight Main Chain checkbox

When enabled the amino-acid chains are highlighted with brighter colors. Changing this requires reloading shaders.

#### Raytrace Atoms Optim checkbox

When enabled ray-sphere intersections are used during the octree traversal to speed up the algorithm. Changing this requires reloading shaders.

#### Skip Using Definitive Hit Optim checkbox

When enabled if a ray-sphere intersection is found during octree traversal, additionally a check for a definitive hit is done to speed up the algorithm. Changing this requires reloading shaders.

#### Make Kd-Esque Octree checkbox

When enabled, the first 2 layers of the octree will be created based on the kd-tree creation process.

#### Make Irregular Octree checkbox

When enabled, the octree cells will have their bounds reduced to fit all the contained atoms with the smallest possible bounds.

#### Automatic Octree Size checkbox

When enabled, the number of octree layers will be picked automatically based on the atom size scale, smoothmin k and the bounds of the current structure.

#### Cartoon Edges checkbox

When enabled, cartoon edges will be added to the renders.

#### Color By Chain Number checkbox

When enabled, cartoon edges will be added to the renders.

#### Center Distance Fade checkbox

When enabled, colors will be darkened close to the center of the molecule. Can be useful for very large molecules.

#### Octree Layers slider

Allows setting the exact number of layers that should be used for the octree. Automatic octree size needs to be disabled for this to take effect.

#### Benchmark Distance numeric input

Allows setting the exact distance from the center of the molecule during the benchmark. If the value is set to 0, the current distance will be used and for `1cqw` and `1aon` a preset distance will be used (50, 250 respectively).

#### Transparency/Debug A slider

Controls small things in the final shader. The most important thing this controls is the brightness for the transparent modes. Otherwise mostly used for debugging.

#### Debug B slider

Controls small things in the final shader. Mostly used for debugging.

#### Use Fixed Canvas Size checkbox

When enabled the canvas will be resized to the resolution given in the two inputs below the checkbox. If disabled the canvas will get resized dynamically.


### Shader Reload

The shader reload button reloads the shader with the preprocessor flags provided. Some of the preprocessor flags have their own checkboxes in the UI. This button needs to be pressed to apply the changes in the preprocessor flags.

Above the button is an input field which can be used to input any additional preprocessor flags which do not have their own buttons. Use commas to delimit the preprocessor flags. Above this input field is a file input which can be used to load a new `raymarchOctree.wgsl` shader during runtime.

### Color Options

The color options is another drop down inside the Additional Options drop down.

#### Add Debug Colormap checkbox

Shows a colormap for some debug modes in the top left of the screen for values 0-1. Requires a shader reload.

#### RGB for atom

Can be used to change the base colors used for the different atom types.

#### RGB for background

Can be used to set the background color.

#### Create URL

Creates a URL which can be used to share the website with the currently applied options set.

### Preprocessor Options

This section contains the available preprocessor options which do not have their own checkboxes, as they are not important enough.

#### DontUseSmoothColorBlending

When enabled colors of the atoms will not be smoothly blended between the closest atoms.

#### DontUseDistanceFade

Disables the distance fade depth cue. When enabled far away atoms will not be darkened and close atoms will not be brightened.

#### CreateSliceX CreateSliceY CreateSliceZ

Slices the molecule in part. This can allow seeing inside the molecule. The position of the slice is controlled with DebugA. To get good results disable "Skip Using Definitive Hit Optim". Unoptimized performance.

#### CreateSlabX CreateSlabY CreateSlabZ

Creates a slab from the molecule. This can allow seeing inside the molecule. The position of the slab is controlled with DebugA. To get good results disable "Skip Using Definitive Hit Optim". Unoptimized performance.

#### DontAllowResetRaymarch

When enabled the raymarching process will not conclude at the end of the first raymarched cell. Changing this requires reloading shaders.

#### FirstIndexBasedOnDistance

Experimental option that tries to optimize the raytracing stage by finding the closest octree cell to traverse first. There is already a way that tries to find the closest octree cell in another less accurate way. Does not seem to improve performance.


